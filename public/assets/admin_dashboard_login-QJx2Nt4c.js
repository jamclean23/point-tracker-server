import{r as o,j as e,c as x}from"./client-nMGDAYsi.js";function f(a,r,t){t(),r(a)}function j(a,r,t){t(),r(a)}async function b(a,r,t,n,s,i,h,l,p){if(l()){h(!0);try{const d=await(await fetch("/auth/web_login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:n})})).json();d.result==="success"&&window.location.reload(),d.result==="failed"&&w(t,i,p,d.messages)}catch(c){p("Something went wrong, please try again or contact an administrator."),console.error(c.message),console.error(c.trace)}finally{h(!1)}}}function w(a,r,t,n){n.forEach(s=>{switch(s.field){case"username":a(s.message);break;case"password":r(s.message);break;case"serverMessage":t(s.message);break}})}function m(a,r,t,n){const s=[];a||s.push("Must not be blank.");const i=[];return t||i.push("Must not be blank."),/\s/.test(t)&&i.push("Password may not contain spaces."),s.length?r(s[0]):r(""),i.length?n(i[0]):n(""),!s.length&&!i.length}function S(){const[a,r]=o.useState(""),[t,n]=o.useState(""),[s,i]=o.useState(""),[h,l]=o.useState(""),[p,c]=o.useState(""),[d,g]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("h1",{children:[e.jsx("span",{className:"pointSpan",children:"Point "}),e.jsx("span",{className:"trackerSpan",children:"Tracker"})]}),e.jsxs("main",{children:[e.jsx("h2",{children:"Admin Dashboard Login"}),e.jsxs("div",{className:"inputWrapper",children:[e.jsx("label",{children:"Username"}),e.jsx("input",{type:"text",placeholder:"Username",maxLength:20,value:a,onChange:u=>{f(u.target.value,r,()=>{m(u.target.value,n,s,l)})}}),e.jsx("span",{className:"errSpan errText",children:t||" "})]}),e.jsxs("div",{className:"inputWrapper",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{maxLength:20,type:"password",placeholder:"Password",value:s,onChange:u=>{j(u.target.value,i,()=>{m(a,n,u.target.value,l)})}}),e.jsx("span",{className:"errSpan errText",children:h||" "})]}),e.jsx("div",{className:"btnWrapper",children:e.jsx("button",{id:"submitBtn",disabled:d,onClick:()=>b(a,r,n,s,i,l,g,()=>m(a,n,s,l),c),children:"Submit"})}),e.jsx("p",{id:"serverMessage",className:"errText",children:p})]})]})}x(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(S,{})}));
